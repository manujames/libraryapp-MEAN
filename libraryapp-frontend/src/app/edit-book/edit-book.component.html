<!-- Edit Book -->
<section class="page-section input-section input-section-bg-dark d-flex align-items-center" id="addBook">
    <div class="container">
        <br>
        <br>
        <div class="text-center">
            <h2 class="section-heading text-uppercase">Edit Book Information</h2>
            <h3 class="section-subheading text-muted">Modify details of the book.</h3>
        </div>
        <form id="editBookForm" name="editBookForm" class="input-form" #editBookForm="ngForm" (ngSubmit)="saveBook()" enctype="multipart/form-data" novalidate=true>
            <div class="row align-items-stretch mb-5">
                <div id="success" class="col-md-12 text-center" [class.d-none]='state=="none"'>
                    <div class='alert alert-warning' [class.d-none]='state!="fetch"'>
                        <strong>Loading..</strong>
                        <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>
                    </div>
                    <div class='alert alert-warning' [class.d-none]='state!="connecting"'>
                        <strong>Saving..</strong>
                        <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>
                    </div>
                    <div class='alert alert-success' [class.d-none]='state!="success"'>
                        <strong>Saved successfully</strong>
                        <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>
                    </div>
                    <div class='alert alert-danger' [class.d-none]='state!="error"'>
                        <strong>{{errorMsg}}</strong>
                        <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <input [disabled]='disableForm' class="form-control" id="title" name="title" type="text" placeholder="Title *" required
                            #title="ngModel" [class.is-valid]='title.valid' [class.is-invalid]='title.invalid && title.touched' [(ngModel)]='book.title'/>
                        <p class='text-danger' [class.d-none]='title.valid || title.untouched'>Please enter book title.</p>
                    </div>
                    <div class="form-group">
                        <input [disabled]='disableForm' class="form-control" id="author" name="author" type="text" placeholder="Author *" required
                            #author="ngModel" [class.is-valid]='author.valid' [class.is-invalid]='author.invalid && author.touched' [(ngModel)]='book.author'/>
                        <p class='text-danger' [class.d-none]='author.valid || author.untouched'>Please enter auther name.</p>
                    </div>
                    <div class="form-group">
                        <input [disabled]='disableForm' class="form-control" id="genre" name="genre" type="text" placeholder="Genre *" required
                            #genre="ngModel" [class.is-valid]='genre.valid' [class.is-invalid]='genre.invalid && genre.touched' [(ngModel)]='book.genre'/>
                        <p class='text-danger' [class.d-none]='genre.valid || genre.untouched'>Please enter book genre.</p>
                    </div>
                    <div class="form-group mb-md-0">
                        <div class="row">
                            <div class="col">
                                <label for="img" style="color: white;">Select an image of size less than 1 MB</label>
                                <input [disabled]='disableForm' class="form-control" id="img" name="img" type="file" accept="image/*" (change)="onFileChange($event)"/>
                            </div>
                            <div class="col" *ngIf="imageSrc">
                                <img [src]="imageSrc" onerror='this.src="assets/images/book-default.png"' style="height: 135px; width:135px">
                            </div>
                        </div>
                        <p class='text-danger' [class.d-none]='!imgError'>{{imgError}}</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group form-group-textarea mb-md-0">
                        <textarea [disabled]='disableForm' class="form-control" id="description" name="description" placeholder="Description *" required
                            #description="ngModel" [class.is-valid]='description.valid' [class.is-invalid]='description.invalid && description.touched' [(ngModel)]="book.description"></textarea>
                        <p class='text-danger' [class.d-none]='description.valid || description.untouched'>Please enter a short description.</p>
                    </div>
                </div>
            </div>
            <div class="text-center">
                <a routerLink="/books" class="btn btn-light btn-xl text-uppercase" id="cancelButton" role="button">Cancel</a>
                <button class="btn btn-primary btn-xl text-uppercase" id="editBookButton" type="submit" [disabled]='editBookForm.form.invalid || imgError || disableForm'>Save</button>
            </div>
        </form>
    </div>
</section>